<div class="container-fluid margin-lr-100">
    <div class="live-session-wrapper row">
        <div class="live-session-stream-wrapper col-lg-8">
            <section id="stream__container">
              <div class="session-header-title">
                <p>{{current_lsession?.name}}</p>
              </div>
                <div id="stream__box">
                  <div class="video__container" *ngIf="current_stream_user" (click)="minimizeScreen(current_stream_user)" id="user-container-{{ current_stream_user }}">
                    <div class="video-player"  id="user-{{ current_stream_user }}" ></div>
                  </div>
                </div>
                <div id="streams__container">
                  <div *ngFor="let item of stream_users" class="streams_for">
                    <div class="video__container" id="user-container-{{ item }}" *ngIf="current_stream_user!=item" (click)="maximizeStreamUserScreen(item)">
                      <div class="video-player" id="user-{{ item }}"></div>
                    </div>
                  </div>
                </div>

                <div class="stream__actions" *ngIf="current_user_joined_streem">
                  <div class="stream__action">
                    <button id="camera-btn" class="{{camera_btn_class}}" (click)="toggleCamera()">
                      <svg *ngIf="camera_btn_class=='active'"
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                      >
                        <path
                          d="M5 4h-3v-1h3v1zm10.93 0l.812 1.219c.743 1.115 1.987 1.781 3.328 1.781h1.93v13h-20v-13h3.93c1.341 0 2.585-.666 3.328-1.781l.812-1.219h5.86zm1.07-2h-8l-1.406 2.109c-.371.557-.995.891-1.664.891h-5.93v17h24v-17h-3.93c-.669 0-1.293-.334-1.664-.891l-1.406-2.109zm-11 8c0-.552-.447-1-1-1s-1 .448-1 1 .447 1 1 1 1-.448 1-1zm7 0c1.654 0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3zm0-2c-2.761 0-5 2.239-5 5s2.239 5 5 5 5-2.239 5-5-2.239-5-5-5z"
                        />
                      </svg>
                      <svg *ngIf="camera_btn_class!='active'"
                      id="Icons" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">
                        .st0{fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
                        .st1{fill:none;stroke:#000000;stroke-width:2;stroke-linejoin:round;stroke-miterlimit:10;}
                      </style><line class="st0" x1="3" x2="29" y1="3" y2="29"/><path class="st0" d="M23,9l-1.4-2.9c-0.3-0.7-1-1.1-1.8-1.1h-7.5c-0.8,0-1.5,0.4-1.8,1.1L9,9H5c-1.1,0-2,0.9-2,2v14c0,1.1,0.9,2,2,2  h22c1.1,0,2-0.9,2-2V11c0-1.1-0.9-2-2-2H23z"/><circle class="st0" cx="16" cy="17" r="6"/><line class="st0" x1="6" x2="8" y1="12" y2="12"/>
                    </svg>

                    </button>
                    <span class="btn-title-span" *ngIf="camera_btn_class=='active'">Off</span>
                    <span class="btn-title-span" *ngIf="camera_btn_class!='active'">On</span>
                  </div>

                  <div class="stream__action">
                    <button id="mic-btn" class="{{mic_btn_class}}" (click)="toggleMic()">
                      <svg *ngIf="mic_btn_class=='active'"
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                      >
                        <path
                          d="M12 2c1.103 0 2 .897 2 2v7c0 1.103-.897 2-2 2s-2-.897-2-2v-7c0-1.103.897-2 2-2zm0-2c-2.209 0-4 1.791-4 4v7c0 2.209 1.791 4 4 4s4-1.791 4-4v-7c0-2.209-1.791-4-4-4zm8 9v2c0 4.418-3.582 8-8 8s-8-3.582-8-8v-2h2v2c0 3.309 2.691 6 6 6s6-2.691 6-6v-2h2zm-7 13v-2h-2v2h-4v2h10v-2h-4z"
                        />
                      </svg>
                      <svg *ngIf="mic_btn_class!='active'"
                      class="feather feather-mic-off" fill="none" height="24" stroke="currentColor" stroke-linecap="round"
                      stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                      <line x1="1" x2="23" y1="1" y2="23"/><path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"/><path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"/><line x1="12" x2="12" y1="19" y2="23"/><line x1="8" x2="16" y1="23" y2="23"/>
                      </svg>
                    </button>
                    <span class="btn-title-span" *ngIf="mic_btn_class=='active'">Mute</span>
                    <span class="btn-title-span" *ngIf="mic_btn_class!='active'">UnMute</span>
                  </div>

                  <div class="stream__action">
                    <button id="screen-btn" class="{{screen_btn_class}}" (click)="toggleScreen()">
                      <svg *ngIf="screen_btn_class=='active'"
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                      >
                        <path
                          d="M0 1v17h24v-17h-24zm22 15h-20v-13h20v13zm-6.599 4l2.599 3h-12l2.599-3h6.802z"
                        />
                      </svg>
                      <svg *ngIf="screen_btn_class!='active'"
                       width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg">
                      <path d="M28,22H11.41L30,3.41,28.59,2l-2,2H4A2,2,0,0,0,2,6V22H4V6H24.59L2,28.59,3.41,30l6-6H12v4H8v2H24V28H20V24h8a2,2,0,0,0,2-2V9H28ZM18,28H14V24h4Z"/><rect class="cls-1" data-name="&lt;Transparent Rectangle&gt;" height="32" id="_Transparent_Rectangle_" width="32"/>
                      </svg>
                    </button>
                    <span class="btn-title-span" *ngIf="screen_btn_class=='active'">Share</span>
                    <span class="btn-title-span" *ngIf="screen_btn_class!='active'">Cancel</span>
                  </div>
                  <button *ngIf="is_current_user_owner"
                    id="end-session-btn"
                    class="end-session-btn"
                    style="background-color: #ff5050"
                    (click)="EndSession()"
                  >
                    End Session
                  </button>
                  <button *ngIf="!is_current_user_owner"
                    id="leave-btn"
                    class="leave-stream-btn"
                    style="background-color: #ff5050"
                    (click)="LeaveSession()"
                  >
                    Leave Session
                  </button>
                </div>
              </section>
        </div>

        <nz-tabset class="page-header-tab float-right col-lg-4 messages-participants-container">
          <nz-tab nzTitle="{{'Participants (' + session_participantsCount + ')'}}" class="live-session-participants-header">
              <div class="live-session-participants-wrapper">
                <section class="live-session-participants-waitlist-section" *ngIf="is_current_user_owner">
                  <p class="live-session-participants-waitlist-title">{{'WaitingList (' +  session_waitlist_participantsCount +')'}}</p>
                  <div class="live-session-participants-waitlist-body">
                      <div  *ngFor="let partisipantWaited_item of (sessionParticipantsWaitlist)">
                          <app-session-waited-user [lsessionid]="lsessionid" [participantid]="partisipantWaited_item.id" [session_waited_participant]="partisipantWaited_item"></app-session-waited-user>
                      </div>
                  </div>
                </section>
                <section class="live-session-participants-section">
                    <p class="live-session-participants-title">{{'Participants (' +  session_participantsCount +')'}}</p>
                    <div class="live-session-participants-body">
                        <div  *ngFor="let partisipant_item of (sessionParticipants)">
                            <app-session-user [session_participant]="partisipant_item"></app-session-user>
                        </div>
                    </div>
                </section>
            </div>
          </nz-tab>
          <nz-tab *ngIf="current_lsession?.is_chat==true" nzTitle="{{'Messages (' + session_messagesCount + ')'}}" class="live-session-messages-header">
            <div class="live-session-messages-wrapper">
              <section id="live-session-messages-section">
                  <div id="messages" class="live-session-messages-body">
                      <div class="live-session-messages-info" *ngFor="let message_item of (sessionMessages)">
                          <app-session-message [message]="message_item"></app-session-message>
                      </div>
                  </div>
                  <form id="message_form" *ngIf="current_user_joined_streem" class="live-session-messages-form" [formGroup]="messageForm" nz-form (ngSubmit)="SendMessage()">
                    <nz-form-item>
                      <nz-form-control  class="is-icon">
                        <input formControlName="user_message" type="text" nz-input class="live-session-messages-form-message" placeholder="{{'type a message .... '}}">
                      </nz-form-control>
                    </nz-form-item>
                    <button nz-button type="submit" class="send-btn" nzType="primary"  >
                      <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 32 32" viewBox="0 0 32 32" width="24" height="24">
                        <path d="M4.674 17L1.039 29.726c-.109.381.018.791.323 1.044C1.544 30.922 1.771 31 2 31c.152 0 .306-.035.447-.105L30.236 17H4.674zM4.674 15h25.562L2.447 1.105C2.092.929 1.667.977 1.361 1.23 1.056 1.483.93 1.894 1.039 2.274L4.674 15z" fill="#000000" class="color000 svgShape"></path>
                      </svg>
                    </button>
                  </form>
              </section>
      </div>
        </nz-tab>
      </nz-tabset>
    </div>
</div>
