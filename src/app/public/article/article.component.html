<section class="is-article-block">
    <div class="container">
        <div class="article-full-img">
            <img src="{{replaceImage(article?.image?.url)}}" />
        </div>
        <div class="is-article-sec">
            <div class="is-left-profile">
                <div class="sticky-box">
                    <div class="is-profile">
                        <a [routerLink]="['/profile/',article?.author?.slug]" itemprop="url" *ngIf="article">
                            <img class="avatar" src="{{replaceImage(article?.author?.avatar?.url)}}"
                                alt="{{article?.author?.avatar?.alt}}" />
                        </a>
                    </div>
                    <!-- <div class="is-author-name-sec is-divider" *ngIf="isLoggedInUser">-->
                    <div class="is-author-name-sec is-divider">
                        <span class="is-author-name" itemprop="author" itemscope="">
                            <a [routerLink]="['/profile/',article?.author?.slug]" itemprop="url" *ngIf="article">
                                <span class="name" itemprop="name">
                                    {{article?.author?.fullname}}</span>
                            </a>
                            <a class="follow-btn" *ngIf="!isFollowing" (click)="follow(article?.author?.id)">
                                <img src="assets/images/article/icon/follow.png" />
                                {{'follow' | translate}}
                            </a>
                            <a class="follow-btn" *ngIf="isFollowing" (click)="unfollow(article?.author?.id)">
                                <img src="assets/images/article/icon/un-follow.png" />
                                {{'unFollow' | translate}}
                            </a>
                        </span>
                    </div>
                    <!--<div class="is-like-sec is-divider" *ngIf="isLoggedInUser">-->
                    <div class="is-like-sec is-divider">
                        <!-- <a class="is-like" href="" data-toggle="modal" data-target="#modal-login"><img
                                src="assets/images/article/icon/like.png" />{{'like' | translate}} <span
                                class="likes-count">{{articleLikes}}</span></a> -->

                        <a class="is-like" *ngIf="!isLike" (click)="like()">
                            <i class="far fa-thumbs-up"></i>
                            {{'like' | translate}} {{articleLikes}}
                        </a>
                        <a class="is-like" *ngIf="isLike" (click)="disLike()">
                            <i class="far fa-heart"></i>
                            {{'Dislike ' | translate}} {{articleLikes}}
                        </a>
                        <a class="is-like"><span class="likes-count"><i class="fas fa-eye"></i>{{articleVicewCount}}</span></a>
                        <!-- 
                        <a class="is-bookmark" href=""><img src="assets/images/article/icon/bookmark.png" /></a>
                        <a class="is-dot" href=""><img src="assets/images/article/icon/more.png" /></a> -->
                    </div>
                    <div class="left-media is-divider">
                        <h3>{{'shareArticle' | translate}}</h3>
                        <!-- <div class="sharethis-inline-share-buttons"></div> -->
                        <div class="addthis_inline_share_toolbox"></div>

                    </div>
                    <!-- <div class="is-influencer-btn" routerLink="/influencer">
                        <span>
                            Messsenger<br /> Influencer
                        </span>
                    </div> -->
                </div>
            </div>
            <div class="is-main-article-content">
                <div class="is-content">
                    <div class="is-head">
                        <h2>
                            <a itemprop="mainEntityOfPage" [routerLink]="['/article/',article?.slug]" *ngIf="article">
                                <span itemprop="headline">
                                    {{article?.title}}
                                </span>
                            </a>
                        </h2>
                        <div class="is-small-profile">
                            <div class="is-image">
                                <a [routerLink]="['/profile/',article?.author?.slug]" itemprop="url" *ngIf="article">
                                    <img class="avatar" alt="{{article?.author?.avatar?.alt}}"
                                        src="{{replaceImage(article?.author?.avatar?.url)}}" />
                                    <span class="name" itemprop="name">
                                        {{article?.author.fullname}}</span>
                                </a>
                            </div>
                            <div class="is-date">
                                {{article?.published_at | date:'medium' }}
                                <a class="category cat-purple" [routerLink]="['/category/',article?.category?.slug]"
                                    *ngIf="article">
                                    {{article?.category.title}}
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="is-body">
                        <div class="is-paragraph">
                            <p class="big " innerHTML="{{article?.content}}"></p>

                            <p>{{'publishedBy' | translate}}<a [routerLink]="['/profile/',article?.author?.slug]"
                                    target="_blank" title="  {{article?.author.fullname}}" *ngIf="article">
                                    <span class="name" itemprop="name">
                                        {{article?.author.fullname}}</span></a>
                            </p>
                            <p class="report-abuse-spin" *ngIf="isLoggedInUser">
                                <a class="comment-view-replies" (click)="reportAbuseArticle()">
                                    <nz-spin nzSimple [nzSize]="'small'" *ngIf="isReportAbuseArticleLoading"></nz-spin>
                                    {{'reportAbuseAuth' | translate}}
                                </a>
                            </p>

                            <div class="is-middle-ad-section">
                                <!-- iFrame Ad Tag: 2 -->
                                <iframe src="https://mytrendingstories202.go2cloud.org/aff_ad?campaign_id=2&aff_id=1&format=iframe" scrolling="no" frameborder="0" marginheight="0" marginwidth="0" width="468" height="60" style="margin:0 auto;"></iframe>
                                <!-- // End Ad Tag -->
                            </div>

                            <!-- <p style="color:#ff4020; font-style: italic;" *ngIf="selectedLang!=article?.lang">
                                {{'disclaimer' | translate}}</p> -->
                        </div>
                    </div>
                </div>
                <div class="is-comment-sec" #commentSection>
                    <div class="is-share is-line">
                        <h2>{{'share' | translate}} - </h2>
                        <div class="addthis_inline_share_toolbox"></div>
                    </div>
                    <div class="is-reply-sec">
                        <a name="comments" href="#comments"></a>
                        <h2>{{'comments' | translate}}</h2>
                        <div>
                            <div class="is-comment is-line"
                                *ngFor="let articleComment of articleComments; let i = index">
                                <div class="is-comment-img">
                                    <img class="avatar" src="{{replaceImage(articleComment?.author?.avatar?.url)}}"
                                        alt="{{articleComment?.author?.slug}}" />
                                </div>
                                <div class="is-comment-detail">
                                    <div class="pull-left">
                                        <h4 class="is-comment-user-name">
                                            {{articleComment?.author?.fullname}}
                                            <small class="comment-date"><i>
                                                    {{articleComment?.published_on | date:'medium' }}</i></small>
                                        </h4>
                                    </div>
                                    <div class="pull-right">
                                        <a class="comment-view-replies" *ngIf="isLoggedInUser"
                                            (click)="replyComment(articleComment.uid,articleComment)">
                                            {{'reply' | translate}}</a>
                                        <span *ngIf="isLoggedInUser && userDetails?.id===articleComment?.author?.id">
                                            / </span><a class="comment-view-replies"
                                            *ngIf="isLoggedInUser && userDetails?.id===articleComment?.author?.id"
                                            (click)="editComment(articleComment.uid,articleComment)">
                                            {{'edit' | translate}}</a> <span
                                            *ngIf="isLoggedInUser  && userDetails?.id!==articleComment?.author?.id">
                                            / </span><a [nzLoading]="true" class="comment-view-replies"
                                            *ngIf="isLoggedInUser && userDetails?.id!==articleComment?.author?.id"
                                            (click)="reportAbuseComment(articleComment.uid,articleComment)">
                                            <nz-spin nzSimple [nzSize]="'small'" *ngIf="isReportAbuseLoading"></nz-spin>
                                            {{'reportAbuse' | translate}}
                                        </a>
                                    </div>
                                    <div class="clearfix"></div>
                                    <div class="replied-comment">
                                        <blockquote *ngIf="articleComment.replied_on"
                                            innerHTML="{{articleComment.replied_on}}"></blockquote>
                                        <div innerHTML="{{articleComment.message}}"></div>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="lastCommentDoc"> <a (click)="loadMoreComments()"
                                    *ngIf="!isCommentsLoading"><span>{{'moreComments' | translate}}</span></a>
                                <nz-spin nzSimple *ngIf="isCommentsLoading"></nz-spin>
                            </div>

                            <div class="comment-reply-form" #commentReplySection>
                                <div class="form-group">
                                    <h2>{{'replyHere' | translate}}...</h2>
                                </div>
                                <div [ngClass]="{'replay-container-wrapper':replyMessage}">

                                    <form #commentForm="ngForm" class="comment_reply" *ngIf="isLoggedInUser"
                                        (ngSubmit)="saveComments(commentForm)">

                                        <div class="form-group">

                                            <div class="reply-container">
                                                <blockquote innerHTML="{{replyMessage}}"></blockquote>
                                            </div>

                                            <quill-editor [style]="{height: '500px'}" [placeholder]="''"
                                                [minLength]="10" [maxLength]="400" name="message"
                                                [(ngModel)]="messageDetails" #messageInput="ngModel">
                                                <div quill-editor-toolbar>
                                                    <span class="ql-formats">
                                                        <button class="ql-bold"></button>
                                                        <button class="ql-italic"></button>
                                                        <button class="ql-underline"></button>
                                                        <button class=" ql-link"></button>
                                                    </span>

                                                </div>
                                            </quill-editor>
                                            <div style="color: red;" *ngIf="!messageInput.valid">
                                                {{'comLengthMessage' | translate}}

                                            </div>
                                        </div>




                                        <div class="m-t-10">
                                            <button class="m-5" nz-button nzType="primary" [nzLoading]="isFormSaving"
                                                [disabled]="!commentForm.valid || !messageInput.value">{{'send' | translate}}</button>
                                            <button class="m-5" nz-button nzType="primary"
                                                *ngIf="editedCommentId || replyMessage" (click)="newComment()"
                                                [nzLoading]="isFormSaving">{{'newCom' | translate}}</button>

                                        </div>



                                        <div class="hidden comment_form_success" *ngIf="isCommentSavedSuccessfully">
                                            <p class="text-success">
                                                <b>{{'successMsg' | translate}}</b>
                                            </p>
                                        </div>
                                    </form>







                                </div>



                                <div *ngIf="!isLoggedInUser"><a
                                        [routerLink]="['/auth/login/']"><span>{{'login' | translate}}</span></a> / <a
                                        [routerLink]="['/auth/signup/']"><span>{{'signUp' | translate}}</span></a>
                                    {{'forAddCom' | translate}}.
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="is-right-ad-section">
                <!-- iFrame Ad Tag: 1 (Right) -->
                <iframe src="https://mytrendingstories202.go2cloud.org/aff_ad?campaign_id=1&aff_id=1&format=iframe" scrolling="no" frameborder="0" marginheight="0" marginwidth="0" width="160" height="600"></iframe>
                <!-- // End Ad Tag -->
            </div>
        </div>

    </div>

</section>