rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /articles/{articleId}{
    	allow write: if true;
			allow read: if true;
    }
    match /articles/{articleId}/comments/{commentId} {
     	allow write: if request.auth.uid == resource.data.author.id;
			allow read: if true;
  	}
    match /articles/{articleId}/likes/{likerId} {
			allow write: if request.auth != null;
			allow read: if true;
  	}
    match /users/{userId} {
			allow write: if request.auth != null;
			allow read: if request.auth != null;
    }
    match /users/{userId}/networks/{providerId} {
      allow write: if request.auth.uid == userId;
      allow read: if request.auth.uid == userId;
    }
    match /categories/{categoryId} {
      allow write: if false;
      allow read: if true;
    }
    match /users/{userId}/followings/{followerId} {
     	allow write: if request.auth.uid == userId;
			allow read: if request.auth.uid == userId;
  	}
    match /users/{userId}/invitation/{invitationId} {
     	allow write: if request.auth.uid == userId;
			allow read: if request.auth.uid == userId;
  	}
    match /members/{memberId}{
     	allow write: if request.auth.uid == memberId;
			allow read: if true;
  	}
    
    match /members/{memberId}/followers/{followerId}{
     	allow write: if request.auth != null;
			allow read: if true;
  	}
    match /members/{memberId}/followings/{followingsId}{
     	allow write: if request.auth != null;
			allow read: if true;
  	}
	
    match /topics/{topicId}{
      allow write: if false;
      allow read: if true;
  	}
    match /migrate/** {
      allow write: if false;
      allow read: if false;
  	}

  }
}